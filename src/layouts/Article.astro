---
import TableOfContent from "@/components/TableOfContent";
import Image from "@/components/images/QwikImage";
import type {Post} from "@/content";

interface Props {
	post: Post;
}

const {post} = Astro.props;
const html = post.html;

const image = post.banner;
---

<article
	role="article"
	data-pagefind-body
	class:list={[
		"relative grid",
		"px-4 pb-40 mt-24 lg:px-0 gap-y-8 lg:gap-x-4",
		"grid-cols-[1fr,min(640px,100%),1fr] [&>*]:col-start-2 lg:[&>*]:col-start-2",
		"lg:grid-cols-[1fr,minmax(auto,224px),min(640px,100%),minmax(auto,224px),1fr]",
	]}
>
	<figure class="lg:!col-end-5 h-[400px] group/img overflow-clip relative rounded-box">
		<div
			aria-hidden="true"
			class:list={[
				"absolute top-0 left-0 h-full w-full rounded-box",
				"bg-gradient-to-t from-base-100 via-transparent to-transparent",
				"transition duration-1000 ease-in-out z-10 group-hover/img:z-0",
			]}
		>
		</div>
		<Image
			height={400}
			width={1200}
			src={image}
			alt={post.title}
			class:list={["transition duration-1000 ease-in-out group-hover/img:scale-110"]}
		/>
	</figure>

	<div class="lg:!col-end-5">
		<h1
			role="heading"
			data-weight="30"
			data-pagefind-meta="title"
			data-pagefind-sort="weight[data-weight]"
			class="text-xl xs:text-2xl sm:text-3xl lg:text-4xl"
		>
			{post.title}
		</h1>
	</div>

	<div class="lg:!col-end-5">
		<p class="prose max-w-full">
			{post.description}
		</p>
	</div>

	<div class="row-start-4 lg:!col-start-4 lg:!col-end-5">
		<div class="w-full sticky top-10">
			<TableOfContent headings={post.headings} />
		</div>
	</div>

	<div set:html={html} class:list={["lg:!col-end-4 max-w-full prose sm:prose-base w-full"]} />
</article>
