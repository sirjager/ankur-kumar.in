---
import TableOfContent from "@/components/TableOfContent";
import FeaturedImage from "@/components/FeaturedImage.astro";
import type {Post} from "@/content";

interface Props {
	post: Post;
}

const {post} = Astro.props;
---

<article
	role="article"
	data-pagefind-body
	class:list={[
		"relative grid",
		"px-4 pb-40 mt-24 lg:px-0 gap-y-8 lg:gap-x-4",
		"grid-cols-[1fr,min(640px,100%),1fr] [&>*]:col-start-2 lg:[&>*]:col-start-2",
		"lg:grid-cols-[1fr,minmax(auto,224px),min(640px,100%),minmax(auto,224px),1fr]",
	]}
>
	{
		post.banner && (
			<figure class="lg:!col-end-5 max-w-full group/img overflow-clip relative rounded-box">
				<FeaturedImage banner_y={post.banner_y} src={post.banner} alt={post.title} />
			</figure>
		)
	}

	<div class="lg:!col-end-5">
		<h1
			role="heading"
			data-weight="30"
			data-pagefind-meta="title"
			data-pagefind-sort="weight[data-weight]"
			class="text-xl xs:text-2xl sm:text-3xl lg:text-4xl"
		>
			{post.title}
		</h1>
	</div>

	<div class="lg:!col-end-5">
		<p class="prose max-w-full">
			{post.description}
		</p>
	</div>

	<div class="row-start-4 lg:!col-start-4 lg:!col-end-5">
		<div class="w-full sticky top-10">
			<TableOfContent headings={post.headings} />
		</div>
	</div>

	<div
		set:html={post.html}
		class:list={["lg:!col-end-4 max-w-full lg:!max-w-[65vw] prose sm:prose-base"]}
	/>
</article>
