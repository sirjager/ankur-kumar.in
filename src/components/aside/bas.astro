---
import Link from "@/components/Link.astro";
import type {Post} from "@/content";
import Image from "@/components/images/QwikImage";

interface Props {
	posts: Post[];
	title: string;
	label: string;
}

const {posts, label, title} = Astro.props;
---

<div
	class:list={[
		"group relative rounded-box",
		"border-2 border-base-content/20 hover:border-accent",
		"transition duration-500 ease-in-out",
		"shadow-md hover:shadow-lg",
	]}
>
	<div class:list={["relative mt-4 w-full"]}>
		<div class="absolute top-1/2 h-0.5 w-full bg-base-content/20"></div>
		<div
			class="absolute top-1/2 h-0.5 w-0 bg-accent transition-all duration-300 ease-in-out group-hover:w-full"
		>
		</div>
		<div class="w-fit select-none">
			<div class="relative ml-4 bg-base-100 px-2 text-sm font-bold uppercase">{label}</div>
		</div>
	</div>

	<details
		open
		id="toc-details"
		data-tip={`Click on ${title} to toggle`}
		class="tooltip w-full group-hover:tooltip-open"
	>
		<summary
			class="flex cursor-pointer select-none items-center pb-2 pl-6 pr-2 text-3xl font-bold uppercase text-accent"
		>
			{title}
		</summary>

		<div id="most-viewed-posts" class="flex flex-col gap-2 p-4">
			{
				posts.map((post) => {
					return (
						<Link
							aria-label={`Read "${post.title}"`}
							href={`/blog/${post.slug}`}
							class:list={["group/title flex gap-2 overflow-clip"]}
						>
							<Image
								src={post.banner}
								alt={`${post.title} banner`}
								class:list={["h-16 max-h-16 w-16 min-w-16 max-w-16 rounded-box"]}
							/>
							<div class="line-clamp-2 text-sm group-hover/title:underline">{post.title}</div>
						</Link>
					);
				})
			}
		</div>
	</details>
</div>
